Changelog
=========

Unreleased
----------

11.0.0 (19.11.2025)
-------------------
  - Прекращена поддержка НДС 18% и НДС 18/118
  - Добавлена поддержка НДС 22% и НДС 22/122

10.2.3 (08.09.2025)
------------------
  - Изменения по v1:
    - В классе `Correction` параметр `document` стал необязательным для `createSelf`
  - Изменения по v2:
    - В классе `CorrectionInfo` параметр `base_number` стал необязательным для `createSelf`

10.2.2 (26.08.2025)
------------------
  - Изменения по v1:
    - В класс `CorrectionCheck` добавлен метод `setUser` - email или телефон пользователя для отправки электронного чека
    - В классе `Correction` параметр `description` стал необязательным (устарел и будет удален в будущих версиях)

10.2.1 (12.08.2025)
------------------
  - Изменения по v2:
    - В класс `PlannedStatus` добавлен `PLANNED_STATUS_255` - cтатус товара, подлежащего обязательной маркировке, не изменился

10.2.0 (05.08.2025)
-------------------
  - Изменения по v1:
    - Добавлен класс `CashlessPayment` для передачи сведений об оплате безналичными
    - В классы `Check` и `CorrectionCheck` добавлен метод `setInternet` - признак расчета в "Интернет"
    - В класс `Check` добавлен метод  `addCashlessPayment` - сведения об оплате безналичными

  - Изменения по v2:
    - Добавлен класс `CashlessPayment` для передачи сведений об оплате безналичными
    - Добавлен класс `TimeZone` для передачи сведений о часовой зоне
    - Добавлен класс `PlannedStatus` для передачи сведений о планируемом статусе товара
    - В классы `Check` и `CorrectionCheck` добавлен метод `setInternet` - признак расчета в "Интернет"
    - В классы `Check` и `CorrectionCheck` добавлен метод `setTimeZone` - часовая зона
    - В класс `Check` добавлен метод  `addCashlessPayment` - сведения об оплате безналичными
    - В класс `Position` добавлен метод  `setPlannedStatus` - планируемый статус товара

10.1.1 (11.06.2025)
-------------------
- Возможность установки флага признака использования ОСУ для позиции чека v2

10.1.0 (06.11.2024)
-------------------
- Поддержка НДС 5%, НДС 7%, НДС 5/105 и НДС 7/107

10.0.0 (16.09.2024)
-------------------
- Исправлено "Deprecated function: Creation of dynamic property" в ApiValidationException->__construct()
- Минимальная поддерживаемая версия PHP 7.2
- Прекращена поддержка PHP 5.x

9.2.0 (21.02.2024)
-------------------
- Поддержка place_address

9.1.2 (25.07.2023)
-------------------
- Тесты для подакцизного товара в позиции заказа

9.1.1 (30.12.2022)
-------------------
- Поднял версию php5 cli
- Поддержка типа `gs10` для v2 структуры чеков

9.1.0 (03.11.2022)
-------------------

- У чека коррекции v2 убран параметр base_name
- Параметр base_number теперь является необязательным для чека коррекции v2

9.0.2 (06.05.2022)
-------------------

- Добавил метод set_client для чека коррекции в v1

9.0.1 (06.04.2022)
-------------------

- email является необязательным для Buyer в v2
- Исправлены тесты

9.0.0 (31.03.2022)
-------------------

- php_sdk_v2

8.0.0 (02.03.2021)
-------------------

- Параметр `sno` для класса `Order` является обязательным
- Изменен порядок передачи параметра `sno` в классе `Order`

7.3.0 (03.02.2021)
-------------------

- В класс `Order` добавлено поле `client_coordinate`
- Добавлен признак расчёта `pay`

7.2.0 (02.10.2020)
-------------------

- В класс `OrderPosition` добавлен метод для добавления маркировки

7.1.0 (21.09.2020)
-------------------

- Для заказов добавлена поддержка `nomenclature_code`, `is_need_nomenclature_code`

7.0.0 (08.09.2020)
-------------------

- Добавлены классы `Employee`, `EmployeeType`, `EmployeeManager` для создания, просмотра, редактирования сотрудников
- Класс `CourierManager` заменен на общий `EmployeeManager`

6.2.0 (10.06.2020)
-------------------

- Добавлен класс `AdditionalUserProps` для передачи дополнительного реквизита пользователя
- В класс `Check` добавлен метод `setAdditionalUserProps` для установки дополнительного реквизита пользователя в чек
- В классe `Check` переименован метод `addAdditionalCheckProps` в `setAdditionalCheckProps`

6.1.0 (25.06.2020)
-------------------

- В классе `Nomenclature` параметр `code` сделан необязательным
- В класс `Nomenclature` добавлен метод `setCode` для передачи номенклатуры в ASCII виде
- В класс `Nomenclature` добавлены методы `setHexCode` для передачи номенклатуры в HEX виде

6.0.0 (22.06.2020)
-------------------

- Из Класса кода маркировки Nomenclature убран атрибут type, теперь достаточно передавать только code.

5.0.0 (19.06.2020)
-------------------

- Параметр `task_id` заменен на параметр `external_id`

4.2.0 (04.06.2020)
-------------------

- Добавлен класс ApiValidationException для обработки исключений валидации на API

4.1.0 (03.06.2020)
-------------------

- В класс `Check` добавлен метод `setCallbackUrl` для установки `callback_url`

4.0.0 (26.03.2020)
-------------------

- В классе `Position` убрана поддержка `discount`
- В класс `Check` добавлен метод `addAdditionalCheckProps` для поддержки дополнительного реквизита чека

3.1.0 (02.03.2020)
-------------------

- Для заказов добавлена поддержка `exices`, `country_code`, `declaration_number`

3.0.0 (20.01.2020)
-------------------

- Заменены параметры `gtin` и `serial` класса `Nomenclature` на `code`

2.6.0 (16.12.2019)
------------------

- В метод `Order.add_position` добавлен необязательный параметр `agent`.

2.5.0 (18.11.2019)
------------------

- Параметр `inn` в классе `Cashier` и `AuthorisedPerson` необязателен для ввода

2.4.2 (06.09.2019)
------------------

- Точности округления перед использованием функции `json_encode` выставлена для всех версий php

2.4.1 (03.09.2019)
------------------

- Изменена настройка точности округления перед использованием функции `json_encode`

2.4.0 (12.08.2019)
------------------

- Добавлен метод `setName` в класс `Buyer`

2.3.4 (06.08.2019)
------------------

- Исправлены ошибки при серилиазации полей класса `Position`

2.3.3 (18.07.2019)
------------------

- Добавлены празнаки рассчета `PROPERTY_RIGHT`, `NON_OPERATING`, `INSURANCE`, `SALES_TAX`, `RESORT_FEE` у класса `CalculationSubject`
- Добавлен класс `Nomenclature` для создания маркировок
- Добавлены новые методы `Position::setNomenclature`, `Position::setExcise`, `Position::setCountryCode` и `Position::setDeclarationNumber`


2.3.2 (10.07.2019)
------------------

- Исправлена обработка НДС 0%


2.3.1 (08.07.2019)
------------------

- Параметры конструктора `Buyer` сделаны необязательны для ввода
- Добавлен метод `setINN` в класс `Buyer`


2.3.0 (26.06.2019)
------------------

- Добавлена настройка точности округления перед использованием функции `json_encode`
- Добавлена функция `applyDiscount` для заказа доставки для применения общей скидки

2.2.0 (19.04.2019)
------------------

- Добавлены классы `Order`, `OrderManager`, `OrderPosition` для работы с заказами
- Добавлен класс `CourierManager` для работы с курьерами
- Добавлено конвертирование типов НДС `Vat::RATE_18` и `Vat::RATE_118` в `Vat::RATE_20` и `Vat::RATE_120`.

2.1.0 (05.06.2019)
------------------

- Добавлен класс покупателя `Buyer`
- Добавлена функция `Check::addBuyer` для передачи данных покупателя в чек на фискализацию


2.0.2 (16.04.2019)
------------------

- Исправлена структура передачи данных поставщика в позиции заказа
- Расширенны возможности статических функций `Check::createSell`, `Check::createSellReturn`,
  `Check::createBuy` и `Check::createBuyReturn` приемом адреса места расчета `$paymentAddress`


2.0.1 (23.01.2019)
------------------

- Перед использованием констант добавлена проверка на существование класса `Psr\Log\LogLevel`


2.0.0 (18.01.2019)
------------------

- Убраны типы НДС `Vat::RATE_18` и `Vat::RATE_118`


1.3.0 (24.12.2018)
------------------

- Добавлены новые методы `Agent::setSupplierInfo`, `Agent::setPayingAgentInfo`, `Agent::setReceivePaymentsOperatorInfo` и `Agent::setMoneyTransferOperatorInfo`

- Класс `Check` принимает необязательный параметр места расчета `$paymentAddress`


1.2.0 (10.12.2018)
------------------

- Добалвены новые виды НДС `Vat::RATE_20` и `Vat::RATE_120`


1.1.0 (27.11.2018)
------------------

- Добавлен метод применения скидки к чеку `Check::applyDiscount`


1.0.0 (01.09.2018)
------------------

- Убраны методы `Payment::createCard` и `Payment::createCash` из-за расширения списка возможных видов оплаты


0.9.1 (01.09.2018)
------------------

- Вернул методы `createCard` и `createCash` для подержания совместимости версии 0.X.X


0.9.0 (15.08.2018)
------------------

- Добавлены константы направлений платежа `INTENT_BUY` и `INTENT_BUY_RETURN` в класс `Check`


0.8.0 (09.04.2018)
------------------

- Добавлен класс `AuthorisedPerson`


0.7.0 (22.03.2018)
------------------

- Добавлена поддержка ФФД 1.0.5 (Признак рассчета, способ рассчета, данные по кассиру,
  данные по агенту)


0.6.0 (28.11.2017)
------------------

- Добавлен метод `Client::setPartner`
